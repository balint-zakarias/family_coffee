<section class="search">
  <div class="search-input-container">
    <input
      type="text"
      placeholder="Keres√©s‚Ä¶"
      [value]="search()"
      (input)="onSearchChange(($any($event.target)).value)"
    >
    @if(search()){<button 
      class="clear-btn" 
      (click)="clearSearch()"
      type="button"
    >
      √ó
    </button>}
  </div>
</section>

<!-- Kateg√≥ria chipek -->
@if(categories().length){<div class="categories">
  <button
    class="chip"
    [class.active]="!selectedCategory()"
    (click)="selectCategory(null)"
  >
    √ñsszes
  </button>

  @for (c of categories(); track c.slug){<button
    class="chip"
    [class.active]="selectedCategory() === c.slug"
    (click)="selectCategory(c.slug)"
  >
    {{ c.name }}
  </button>}
</div>}

<div class="products-container">
  @if(loading()){<section class="loading">
    <div class="spinner"></div>
    <p>Bet√∂lt√©s‚Ä¶</p>
  </section>}

  @if(error()){<section class="error">Hiba: {{ error() }}</section>}

  @if(!loading() && !error() && products().length > 0){<section class="grid">
    @for(p of products(); track p.id){<ui-product-card 
    [product]="p"
    [globalDisabled]="addingToCart()"
    (addToCart)="onAddToCart($event)"
    (viewDetails)="onViewDetails($event)"
    ></ui-product-card>}
  </section>}

  @if(!loading() && !error() && products().length === 0){<section class="empty-products">
    <div class="empty-content">
      <div class="empty-icon">üì¶</div>
      <h2>Nincs tal√°lat</h2>
      @if(search() || selectedCategory()){<p>A keres√©si felt√©teleknek megfelel≈ë term√©k nem tal√°lhat√≥.</p>}
      @if(!search() && !selectedCategory()){<p>Jelenleg nincsenek el√©rhet≈ë term√©kek.</p>}
      @if(search() || selectedCategory()){<button class="clear-filters-btn" (click)="clearFilters()">
        Sz≈±r≈ëk t√∂rl√©se
      </button>}
    </div>
  </section>}
</div>