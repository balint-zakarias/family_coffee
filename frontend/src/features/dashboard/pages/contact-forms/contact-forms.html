<!-- Page Header -->
<app-dashboard-header 
  title="Kapcsolat √ºzenetek" 
  subtitle="Be√©rkezett kapcsolat √ºzenetek megtekint√©se √©s kezel√©se"
></app-dashboard-header>

<main class="contact-forms-main">
  <div class="contact-forms-container">

    <!-- Loading -->
    <section *ngIf="loading()" class="loading-section">
      <div class="loading-spinner"></div>
      <p>√úzenetek bet√∂lt√©se...</p>
    </section>

    <!-- Error -->
    <section *ngIf="error()" class="error-section">
      <div class="error-icon">‚ö†Ô∏è</div>
      <h3>Hiba t√∂rt√©nt</h3>
      <p>{{ error() }}</p>
      <button type="button" class="btn btn-primary" (click)="loadContactMessages()">
        √öjrapr√≥b√°l√°s
      </button>
    </section>

    <!-- Contact Messages Table -->
    <section *ngIf="!loading() && !error()" class="table-section">
      <div class="table-container">
        <table class="contact-messages-table">
          <thead>
            <tr>
              <th>N√©v</th>
              <th>El√©rhet≈ës√©g</th>
              <th>√úzenet</th>
              <th>D√°tum</th>
              <th>M≈±veletek</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let message of contactMessages()" class="message-row">
              <!-- Name -->
              <td class="name-cell">
                <strong>{{ message.name }}</strong>
              </td>

              <!-- Contact Info -->
              <td class="contact-cell">
                <div class="contact-info">{{ getContactInfo(message) }}</div>
              </td>

              <!-- Message -->
              <td class="message-cell">
                <div class="message-content">{{ message.message }}</div>
              </td>

              <!-- Date -->
              <td class="date-cell">
                {{ message.createdAt | date:'yyyy.MM.dd HH:mm' }}
              </td>

              <!-- Actions -->
              <td class="actions-cell">
                <button 
                  type="button" 
                  class="btn btn-danger btn-sm"
                  (click)="openDeleteModal(message)"
                  title="√úzenet t√∂rl√©se"
                >
                <mat-icon>delete</mat-icon>
                T√∂rl√©s
                </button>
              </td>
            </tr>
          </tbody>
        </table>

        <!-- Empty state -->
        <div *ngIf="contactMessages().length === 0" class="empty-state">
          <div class="empty-icon">üìß</div>
          <h3>Nincsenek √ºzenetek</h3>
          <p>M√©g nem √©rkezett be kapcsolat √ºzenet.</p>
        </div>
      </div>
    </section>

  </div>
</main>

<!-- Delete Confirmation Modal -->
<app-confirmation-modal
  [isOpen]="showDeleteModal()"
  title="√úzenet t√∂rl√©se"
  [message]="'Biztosan t√∂r√∂lni szeretn√© ' + messageToDelete()?.name + ' √ºzenet√©t? Ez a m≈±velet nem vonhat√≥ vissza.'"
  confirmText="T√∂rl√©s"
  cancelText="M√©gse"
  [isDangerous]="true"
  (confirm)="confirmDelete()"
  (cancel)="closeDeleteModal()"
></app-confirmation-modal>
